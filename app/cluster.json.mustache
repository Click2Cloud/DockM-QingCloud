{
    "name": {{cluster.name}},
    "description": {{cluster.description}},
    "vxnet": {{cluster.vxnet}},
    "nodes": [
	{
		"role": "master",
        "container": {
            "type": "kvm",
            "zone": "pek3a",
            "image": "img-9yjvu1j3"
        },
       "instance_class": {{cluster.master.instance_class}},
       "count": {{cluster.master.count}},
       "cpu": {{cluster.master.cpu}},
       "memory": {{cluster.master.memory}},
       "volume": {
                "size": {{cluster.master.volume_size}},
                "mount_point": "/data",
                "mount_options": "defaults,noatime",
                "filesystem": "ext4"
           },
		   "services": {
                 "init": {
                    "order": 1,
                    "cmd": "/opt/dockm/script/init-master.sh",
                    "timeout": 300
                },
                "start": {
                    "order": 1,
                    "cmd": "docker",
                    "timeout": 300
                },
                "stop": {
                    "order": 1,
                    "cmd": "docker",
                    "timeout": 300
                },
                "destroy": {
                    "order": 3,
                    "nodes_to_execute_on": 1,
                    "post_stop_service": true,
                    "cmd": "docker"
                },
                "upgrade": {
                    "cmd": "docker",
                    "post_start_service": true,
                    "timeout": 300
                 }
            },
            "custom_metadata": {
                "cmd":"docker"
            },
            "health_check": {
                "enable": true,
                "interval_sec": 60,
                "timeout_sec": 10,
                "action_timeout_sec": 30,
                "healthy_threshold": 3,
                "unhealthy_threshold": 3,
                "check_cmd": "docker",
                "action_cmd": "docker"
            },
            "monitor": {
            "enable": true,
            "cmd": "docker",
            "items": {
                "docker_running_container_count": {
                    "unit": "",
                    "value_type": "int",
                    "statistics_type": "latest",
                    "scale_factor_when_display": 0.001
                },
                "docker_running_pod_count": {
                    "unit": "",
                    "value_type": "int",
                    "statistics_type": "latest",
                    "scale_factor_when_display": 0.001
                }
            },
            "groups": {
                "docker": ["docker_running_pod_count","docker_running_container_count"]
            },
            "display": ["docker"],
            "alarm": ["docker_running_container_count"]
            }
        }
	   ],
	    "env": {
            "access_key_id": {{env.access_key_id}},
            "secret_access_key": {{env.secret_access_key}},
            "api_external_domain": {{env.api_external_domain}},
            "insecure-registries": {{env.insecure-registries}},
            "registry-mirrors": {{env.registry-mirrors}},
            "pod_vxnets":{{env.pod_vxnets}},
            "dockerhub_username":{{env.dockerhub_username}},
            "dockerhub_password":{{env.dockerhub_password}},
            "keep_log_days":{{env.keep_log_days}},
            "kube_log_level":{{env.kube_log_level}},
            "fluent_forward_server":{{env.fluent_forward_server}},
            "enable_istio":{{env.enable_istio}},
            "enable_hostnic":{{env.enable_hostnic}},
            "es_server":{{env.es_server}}
        }
}